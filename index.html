<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Egos - Главная</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<style>
  body { font-family: Arial, sans-serif; margin:0; background:#f5f7fa; color:#222; transition: background 0.3s, color 0.3s;}
  a { color: inherit; text-decoration: none;}
  a:hover { text-decoration: underline;}
  header { background: #2e7d32; color: white; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; position: sticky; top:0; z-index: 1000;}
  .logo { font-weight:bold; font-size:24px;}
  nav a { margin-left:20px; font-weight:600; color:white;}
  main.container { max-width:1100px; margin:20px auto 60px; padding:0 15px;}
  h1,h2 { color:#2e7d32; font-weight:700; margin-bottom:15px;}
  #map { width:100%; height:350px; border-radius:10px; margin-top:15px; box-shadow:0 3px 10px rgba(0,0,0,0.1);}
  #weather-box { background:#e0f2f1; padding:15px; border-radius:10px; margin-top:10px; font-weight:600; min-height:60px; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
  .team-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:40px 50px; margin-top:40px;}
  .team-card { background:white; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.1); padding:20px; display:flex; align-items:center; gap:20px;}
  .team-card img { width:130px; height:130px; border-radius:10px; object-fit:cover; box-shadow:0 2px 6px rgba(0,0,0,0.2); flex-shrink:0;}
  .team-card p { font-size:15px; line-height:1.3;}
  .team-card:nth-child(even) { flex-direction: row-reverse; text-align:right;}
  footer { background:#2e7d32; color:white; text-align:center; padding:15px 0; font-size:14px; position: fixed; bottom:0; width:100%;}
  /* Модальное окно чата */
  #ai-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:2000; }
  #ai-chat-box { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:20px; width:350px; max-width:90%; border-radius:10px; display:flex; flex-direction:column; height:400px;}
  #ai-chat { flex:1; overflow-y:auto; margin-bottom:10px;}
  #ai-input { width:100%; padding:8px; border-radius:5px; border:1px solid #ccc;}
  #ai-send { margin-top:5px; padding:8px; background:#2e7d32; color:white; border:none; border-radius:5px; cursor:pointer;}
  /* Кнопки снизу */
  #controls { position: fixed; bottom:60px; right:20px; display:flex; flex-direction:column; gap:10px; z-index:1500;}
  .ctrl-btn { padding:10px 15px; border:none; border-radius:50%; background:#2e7d32; color:white; cursor:pointer; font-weight:bold;}
  body.dark { background:#222; color:white;}
  body.dark #weather-box, body.dark .team-card { background:#333; color:white;}
  body.dark header, body.dark footer { background:#1b5e20;}
</style>
</head>
<body>

<header>
  <div class="logo">Egos</div>
  <nav>
    <a href="#map-section">Карта</a>
    <a href="#team-section">Команда</a>
    <a href="#about-section">О проекте</a>
    <a href="#used-section">Использованные</a>
  </nav>
</header>

<main class="container">
  <section id="map-section">
    <h1>Интерактивная карта</h1>
    <p>Нажмите на любую точку карты, чтобы узнать погоду в выбранной области.</p>
    <div id="map"></div>
    <div id="weather-box">Погода появится здесь.</div>
  </section>

  <section id="team-section">
    <h2>Наша команда</h2>
    <div class="team-grid">
      <div class="team-card">
        <img src="img/sagindyk.jpg" alt="Sagindyk" />
        <p><b>Sagindyk</b><br>AI Engineer<br>Я увлекаюсь созданием инновационных решений с использованием микроконтроллеров и ИИ.</p>
      </div>
      <div class="team-card">
        <p><b>Kamila</b><br>Content Designer<br>Я увлекаюсь спортом, люблю читать книги и изучать языки.</p>
        <img src="img/kamila.jpg" alt="Kamila" />
      </div>
      <div class="team-card">
        <img src="img/azhar.jpg" alt="Azhar" />
        <p><b>Azhar</b><br>Researcher<br>Я увлекаюсь теннисом и плаванием, люблю слушать музыку.</p>
      </div>
      <div class="team-card">
        <p><b>Medina</b><br>SMM Specialist<br>Я занимаюсь танцами, люблю слушать музыку и рисовать.</p>
        <img src="img/medina.jpg" alt="Medina" />
      </div>
      <div class="team-card">
        <img src="img/miras.jpg" alt="Miras" />
        <p><b>Miras</b><br>Frontend Developer<br>Я увлекаюсь логическими играми, люблю читать, слушать музыку и рисовать.</p>
      </div>
    </div>
  </section>

  <section id="about-section" style="margin-top:50px;">
    <h2>О проекте</h2>
    <p>Наш проект направлен на создание интерактивной карты с погодой, а также знакомство с нашей командой и описанием используемых ресурсов.</p>
    <p>Мы используем современные технологии для визуализации данных и создаём удобный интерфейс для пользователей.</p>
  </section>

  <section id="used-section" style="margin-top:50px; margin-bottom: 100px;">
    <h2>Использованные ресурсы</h2>
    <ul>
      <li>Telegram</li>
      <li>GitHub</li>
      <li>DeepSeek</li>
      <li>Replit</li>
      <li>OpenWeather</li>
    </ul>
  </section>
</main>

<footer>© 2025 Команда Egos</footer>

<!-- Модальное окно ИИ -->
<div id="ai-overlay">
  <div id="ai-chat-box">
    <div id="ai-chat"></div>
    <input type="text" id="ai-input" placeholder="Напишите сообщение...">
    <button id="ai-send">Отправить</button>
  </div>
</div>

<!-- Кнопки управления -->
<div id="controls">
  <button class="ctrl-btn" id="ai-btn">ИИ</button>
  <button class="ctrl-btn" id="theme-btn">Тема</button>
  <button class="ctrl-btn" id="music-btn">Музыка</button>
</div>

<!-- Музыка -->
<audio id="bg-music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  // Карта
  const map = L.map('map').setView([48,66],5);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:18}).addTo(map);
  const weatherBox = document.getElementById('weather-box');
  map.on('click', async function(e){
    const lat = e.latlng.lat.toFixed(4);
    const lon = e.latlng.lng.toFixed(4);
    weatherBox.textContent="Загрузка погоды...";
    try{
      const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
      if(!res.ok) throw new Error("Ошибка сети");
      const data = await res.json();
      const temp = data.current_weather.temperature;
      const windSpeed = data.current_weather.windspeed;
      const weatherCode = data.current_weather.weathercode;
      weatherBox.innerHTML=`<h3>Погода в точке (${lat},${lon})</h3>
      <p><b>Температура:</b> ${temp}°C</p>
      <p><b>Скорость ветра:</b> ${windSpeed} км/ч</p>
      <p><b>Код погоды:</b> ${weatherCode}</p>`;
    }catch(err){
      weatherBox.textContent="Ошибка получения данных о погоде.";
      console.error(err);
    }
  });

  // ИИ чат
  const aiOverlay=document.getElementById('ai-overlay');
  const aiBtn=document.getElementById('ai-btn');
  const aiSend=document.getElementById('ai-send');
  const aiInput=document.getElementById('ai-input');
  const aiChat=document.getElementById('ai-chat');

  aiBtn.onclick=()=>{aiOverlay.style.display='block';};
  aiOverlay.onclick=(e)=>{if(e.target===aiOverlay) aiOverlay.style.display='none';};

  aiSend.onclick=async ()=>{
    const text=aiInput.value.trim();
    if(!text) return;
    const userMsg=document.createElement('div');
    userMsg.textContent="Вы: "+text;
    userMsg.style.marginBottom="8px";
    aiChat.appendChild(userMsg);
    aiInput.value="";
    aiChat.scrollTop=aiChat.scrollHeight;

    const aiReply=document.createElement('div');
    aiReply.style.marginBottom="8px";
    aiReply.style.fontWeight="bold";
    aiReply.textContent="ИИ: Подождите, формирую ответ...";
    aiChat.appendChild(aiReply);
    aiChat.scrollTop=aiChat.scrollHeight;

    try{
      // --- Здесь нужно использовать свой сервер или прокси для OpenAI ---
      // Пример локальной заглушки:
      const shortResp=text.split('.').slice(0,2).join('.')+'.';
      aiReply.textContent="ИИ: "+shortResp;
    }catch(err){
      aiReply.textContent="ИИ: Ошибка получения ответа.";
      console.error(err);
    }
  };

  // Кнопка темы
  const themeBtn=document.getElementById('theme-btn');
  themeBtn.onclick=()=>{document.body.classList.toggle('dark');};

  // Кнопка музыки
  const musicBtn=document.getElementById('music-btn');
  const bgMusic=document.getElementById('bg-music');
  musicBtn.onclick=()=>{
    if(bgMusic.paused) bgMusic.play();
    else bgMusic.pause();
  };
</script>

</body>
</html>
