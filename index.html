<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Egos - Главная</title>
  <link rel="stylesheet" href="css/style.css" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body data-theme="green">

<header class="header">
  <div class="logo">Egos</div>
  <nav class="nav" id="navMenu">
    <a href="index.html">Карта</a>
    <a href="team.html">Команда</a>
    <a href="about.html">О проекте</a>
    <a href="channels.html">Использовали</a>
  </nav>
</header>

<main class="container">

  <!-- Секция карты -->
  <section class="map-banner">
    <h1>Интерактивная карта</h1>
    <p>Нажмите на любую точку карты, чтобы узнать погоду в выбранной области.</p>
    <div id="map"></div>
    <div id="weather-box">Погода появится здесь.</div>
  </section>

  <!-- Секция команды -->
  <section>
    <h2>Наша команда</h2>
    <div class="team-grid">
      <div class="team-card">
        <img src="img/sagindyk.jpg" alt="Sagindyk" />
        <p><b>Sagindyk</b><br>AI Engineer<br>Я увлекаюсь созданием инновационных решений с использованием микроконтроллеров и ИИ.</p>
      </div>
      <div class="team-card">
        <p><b>Kamila</b><br>Content Designer<br>Я увлекаюсь спортом, люблю читать книги и изучать языки.</p>
        <img src="img/kamila.jpg" alt="Kamila" />
      </div>
      <div class="team-card">
        <img src="img/azhar.jpg" alt="Azhar" />
        <p><b>Azhar</b><br>Researcher<br>Я увлекаюсь теннисом и плаванием, люблю слушать музыку.</p>
      </div>
      <div class="team-card">
        <p><b>Medina</b><br>SMM Specialist<br>Я занимаюсь танцами, люблю слушать музыку и рисовать.</p>
        <img src="img/medina.jpg" alt="Medina" />
      </div>
      <div class="team-card">
        <img src="img/miras.jpg" alt="Miras" />
        <p><b>Miras</b><br>Frontend Developer<br>Я увлекаюсь логическими играми, люблю читать, слушать музыку и рисовать.</p>
      </div>
    </div>
  </section>

</main>

<footer>
  <p>© 2025 Команда Egos</p>
</footer>

<script src="js/main.js"></script>

<script>
  // Leaflet карта и погода
  const map = L.map('map').setView([48, 66], 5);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18
  }).addTo(map);

  const weatherBox = document.getElementById('weather-box');

  map.on('click', async (e) => {
    const lat = e.latlng.lat;
    const lon = e.latlng.lng;

    weatherBox.textContent = "Загрузка погоды...";

    try {
      const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
      const data = await res.json();

      const temp = data.current_weather.temperature;
      const desc = data.current_weather.weathercode;

      weatherBox.innerHTML = `
        <h3>Погода в выбранной точке</h3>
        <p><b>Температура:</b> ${temp}°C</p>
        <p><b>Код погоды:</b> ${desc}</p>
      `;
    } catch (err) {
      weatherBox.textContent = "Ошибка получения данных.";
      console.error(err);
    }
  });
</script>

</body>
</html>
